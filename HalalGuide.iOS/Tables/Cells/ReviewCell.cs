// This file has been autogenerated from a class added in the UI designer.
using System;

using MonoTouch.UIKit;
using System.Drawing;
using HalalGuide.Domain;
using System.Threading.Tasks;
using HalalGuide.Util;
using HalalGuide.ViewModels;
using HalalGuide.Services;
using MonoTouch.Foundation;

namespace HalalGuide.iOS.Tables.Cells
{
	[Register ("ReviewCell")]
	public  class ReviewCell : BaseTableViewCell
	{
		public static string Identifier = "ReviewCell";

		protected static readonly int ProfileImageTag = 100;
		protected static readonly int Star1ImageTag = 101;
		protected static readonly int Star2ImageTag = 102;
		protected static readonly int Star3ImageTag = 103;
		protected static readonly int Star4ImageTag = 104;
		protected static readonly int Star5ImageTag = 105;

		protected static readonly int SubmitterLabelTag = 201;
		protected static readonly int ReviewLabelTag = 202;

		public SingleDiningViewModel ViewModel = ServiceContainer.Resolve<SingleDiningViewModel> ();

		public ReviewCell (IntPtr handle) : base (handle)
		{
		}

		public ReviewCell (UITableViewCellStyle style, string reuseIdentifier) : base (style, reuseIdentifier)
		{
		}

		public void Configure (Review review)
		{
			//TODO use SDWeb image to get image
			//TODO name of submitter

			UIImageView profilePicture = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);

			UIImageView star1Image = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);
			star1Image.Image = review.rating >= 1 ? UIImage.FromBundle (Images.StarSelected) : UIImage.FromBundle (Images.Star);

			UIImageView star2Image = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);
			star2Image.Image = review.rating >= 2 ? UIImage.FromBundle (Images.StarSelected) : UIImage.FromBundle (Images.Star);

			UIImageView star3Image = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);
			star3Image.Image = review.rating >= 3 ? UIImage.FromBundle (Images.StarSelected) : UIImage.FromBundle (Images.Star);

			UIImageView star4Image = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);
			star4Image.Image = review.rating >= 4 ? UIImage.FromBundle (Images.StarSelected) : UIImage.FromBundle (Images.Star);

			UIImageView star5Image = (UIImageView)ContentView.ViewWithTag (ProfileImageTag);
			star5Image.Image = review.rating >= 5 ? UIImage.FromBundle (Images.StarSelected) : UIImage.FromBundle (Images.Star);

			UILabel reviewLabel = (UILabel)ContentView.ViewWithTag (ProfileImageTag);
			reviewLabel.Text = review.review;
		
		}
	}
}
